@page "/adduser"
@using TestAchieveClubApi.RepositoryItems

@inject HttpClient _http

@if (responseText == null) { }
else
{
    <MudAlert Severity="Severity.Success" Variant="Variant.Outlined">Id нового пользователя @responseText</MudAlert>
}

<MudTextField @bind-Value="_registerParams.FirstName" Label="FirstName" T="string" Variant="Variant.Filled"></MudTextField>
<MudTextField @bind-Value="_registerParams.LastName" Label="LastName" T="string" Variant="Variant.Filled"></MudTextField>
<MudTextField @bind-Value="_registerParams.Email" Label="Email" T="string" Variant="Variant.Filled"></MudTextField>
<MudTextField @bind-Value="_registerParams.Password" Label="Password" T="string" Variant="Variant.Filled"></MudTextField>
<MudTextField @bind-Value="_registerParams.Avatar" Label="Avatar" T="string" Variant="Variant.Filled"></MudTextField>
<MudTextField @bind-Value="_registerParams.ClubRefId" Label="ClubRefId" T="int" Variant="Variant.Filled"></MudTextField>
<MudButton Variant="Variant.Filled" 
           ButtonType="ButtonType.Submit"
           FullWidth="true"
           @onclick="NewUser"
           >Добавить</MudButton>

@code 
{
    private RegisterParams _registerParams = new RegisterParams() { ClubRefId = 1 };
    string responseText;

    private async Task NewUser()
    {
        var response = await _http.PostAsJsonAsync("users", _registerParams.ToUser());
        responseText = await response.Content.ReadAsStringAsync();
    }
}